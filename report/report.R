# Generated by `rjournal_pdf_article()` using `knitr::purl()`: do not edit by hand
# Please edit report.Rmd to modify this file

## ----setup, include=FALSE-----------------------------------------------------
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
library(plotly)
library(ggplot2)
library(kableExtra)
library(microbenchmark)



## ----auc-gini, fig.align = "center", out.width = "100%", fig.cap="Geometric interpretation: AUC (AUROC) is the area under the ROC curve, Gini is twice the area between the diagonal y=x and the ROC curve.", dev=if(knitr::is_latex_output()) "cairo_pdf" else "png"----
cz = c(.6, .8, .95)
sw = c(.9, .8, .6)

df <- data.frame(FPR = c(0, 1-sw, 1), TPR = c(0, cz, 1))

library(ggplot2)
library(patchwork)

ggplot(df, aes(x = FPR, y = TPR)) +
  annotate("rect", xmin = 0, xmax = 1, ymin = 0, ymax = 1, fill = "white", color = "black") +
  geom_area(fill="lightblue") +
  geom_line() +
  geom_point() +
  annotate("text", x = 0.5, y = 0.5, label = "AUC", size =10,  color = "darkblue") +
  coord_fixed(ratio = 1, xlim = c(0,1), ylim = c(0,1)) +
  labs(x = "FPR (1 - specificity)\ncumulative fraction of goods", 
       y = "TPR (sensitivity)\ncumulative fraction of bads") +
  theme_minimal() +

#library(ggplot2)
ggplot(df, aes(x = FPR, y = TPR)) +
  annotate("rect", xmin = 0, xmax = 1, ymin = 0, ymax = 1, fill = "white", color = "black") +
  geom_polygon(fill="orange2") +
  geom_polygon(aes(x=TPR, y=FPR), fill="orange1") +
  geom_line() +
  geom_point() +
  annotate("text", x = 0.5, y = 0.5, label = "Gini", size =10,  color = "orange4") +
  coord_fixed(ratio = 1, xlim = c(0,1), ylim = c(0,1)) +
  labs(x = "FPR (1 - specificity)\ncumulative fraction of goods", y = "") +
  theme_minimal()


## -----------------------------------------------------------------------------
ftl <- read.csv("../data/functions_table.csv", sep = ";")

fth <- as.data.frame(lapply(ftl, function(x) {
  x %>%
    gsub("\\$", "\\\\$", .) %>%
    gsub("@", "\\\\@", .)
  }))

if (knitr::is_latex_output()) {
  knitr::kable(ftl, format = "latex", booktabs = TRUE, linesep = "\\addlinespace",
               caption = "Functions computing AUC.") %>%
    kable_styling(latex_options = c("HOLD_position", "scale_down")) %>%
    column_spec(3, monospace = TRUE)
} else {
  knitr::kable(fth, format = "html",
             caption = "Functions computing AUC.") %>%
    kable_styling(bootstrap_options = "condensed") %>%
    column_spec(3, width_min = "33em", width_max = "33em", monospace = TRUE) %>%
    column_spec(4, width_min = "9em", width_max = "9em")
}


## ----include = FALSE----------------------------------------------------------
benchmark1 <- readRDS("../data/packages_benchmark_1.rds")
benchmark2 <- readRDS("../data/packages_benchmark_2.rds")
benchmark3 <- readRDS("../data/packages_benchmark_3.rds")

plot_benchmark <- function(benchmark) {
  autoplot(benchmark) +
    theme(axis.text.y = element_text(size = rel(1.5)))
}



## -----------------------------------------------------------------------------
plot_benchmark(benchmark1)



## -----------------------------------------------------------------------------
plot_benchmark(benchmark2)



## -----------------------------------------------------------------------------
plot_benchmark(benchmark3)


